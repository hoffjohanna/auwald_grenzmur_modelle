<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title> Zeigerarten und Risikofaktoren im Auwald an der Grenzmur</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- OpenLayers -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@7.5.2/ol.css">
  <script src="https://cdn.jsdelivr.net/npm/ol@7.5.2/dist/ol.js"></script>
  <style>
    html, body { margin:0; height:100%; font-family: system-ui, Arial, sans-serif; }
    header {
      text-align:center; padding:12px; background:#f0f0f0; border-bottom:1px solid #ccc;
      font-size:18px; font-weight:600;
    }
    #map { height: calc(100% - 100px); position: relative; }
    
	
footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  background: #f8f8f8;
  border-top: 1px solid #ddd;
  font-size: 14px;
}

.footer-logos {
  display: flex;
  align-items: center;
  gap: 12px;
}

footer img {
  height: 36px;        /* einheitliche Höhe */
  width: auto;         /* Proportionen beibehalten */
  object-fit: contain; /* falls Logo sehr breit/hoch ist */
}

.footer-text {
  color: #333;
}

/* Auf schmalen Screens untereinander anordnen */
@media (max-width: 600px) {
  footer { flex-direction: column; text-align: center; }
}
	
	
	/* Verhindert die Deprecation-Warnung für OL-Canvas */
	#map canvas { overflow: hidden !important; }

  </style>
</head>
<body>
  <header>Zeigerarten und Risikofaktoren im Auwald an der Grenzmur</header>
  <div id="map"></div>
  <footer>
  <div class="footer-logos">
    <a href="https://www.bfw.gv.at/" target="_blank" rel="noopener">
      <img src="bfw_black.jpg" alt="BFW" loading="lazy" height="36">
    </a>
    <a href="https://www.oekoteam.at/de/team-menu.html" target="_blank" rel="noopener">
      <img src="https://www.oekoteam.at/images/oekologos/oekoteamlogtransp210.png" alt="Ökoteam" loading="lazy" height="36">
    </a>
  </div>
  <div class="footer-text"> Diese Karten sind im Rahmen des Projektes Auwaldinitiative erstellt worden </div>
</footer>

  <script>
    // ===== Orthofoto-Block =====
    // Orthofoto-Basemap (WMTS REST)
    const wmtsSource = new ol.source.WMTS({
      urls: [
        'https://mapsneu.wien.gv.at/basemap/bmaporthofoto30cm/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.jpeg'
      ],
      layer: 'bmaporthofoto30cm',
      matrixSet: 'google3857',
      format: 'image/jpeg',
      style: 'normal',
      requestEncoding: 'REST',
      tileGrid: new ol.tilegrid.WMTS({
        origin: ol.extent.getTopLeft(ol.proj.get('EPSG:3857').getExtent()),
        resolutions: Array.from({length: 20}, (_, z) => 156543.03392804097 / Math.pow(2, z)),
        matrixIds: Array.from({length: 20}, (_, z) => String(z))
      }),
      attributions: 'Basemap: <a href="https://www.basemap.at" target="_blank" rel="noopener">basemap.at</a>'
    });

    const map = new ol.Map({
      target: 'map',
      layers: [ new ol.layer.Tile({ source: wmtsSource }) ],
      view: new ol.View({
        projection: 'EPSG:3857',
        center: [1771934,5895892], //  1765886,5897699
        zoom: 12
      })
    });




    // =====  WMS-Overlays: SDM und Risikokarten =====
    const WMS_URL = 'https://gis.stmk.gv.at/arcgis/services/OGD/ALSHoeheninformation_1m_UTM33N/MapServer/WMSServer';

    // Oberflächenschummerung
    const lyrSchummerung = new ol.layer.Tile({
      source: new ol.source.TileWMS({
        url: WMS_URL,
        params: {
          'LAYERS': 'Oberflaechenschummerung',
          'FORMAT': 'image/png',
          'TRANSPARENT': true,
          'VERSION': '1.3.0',
          'TILED': true
        },
        crossOrigin: 'anonymous'
      }),
      visible: false,
      opacity: 0.8,
      zIndex: 10
    });
	

    // Oberflaechenhoehe_Projekte
    const lyrHoeheProj = new ol.layer.Tile({
      source: new ol.source.TileWMS({
        url: WMS_URL,
        params: {
          'LAYERS': 'Oberflaechenhoehe_Projekte',
          'FORMAT': 'image/png',
          'TRANSPARENT': true,
          'VERSION': '1.3.0',
          'TILED': true
        },
        crossOrigin: 'anonymous'
      }),
      visible: false,
      opacity: 0.8,
      zIndex: 11
    });
	
	// Bombina Verteilung 
    const lyrBombina_const = new ol.layer.Tile({
      source: new ol.source.TileWMS({
        url: 'https://inspire.lfrz.gv.at/000602/wms',
        params: {
          'LAYERS': '000602:Bombina_Modell_cont',
          'FORMAT': 'image/png',
          'TRANSPARENT': true,
          'VERSION': '1.3.0',
          'TILED': true
        },
        crossOrigin: 'anonymous'
      }),
      visible: false,
      opacity: 0.8,
      zIndex: 11
    });

    // Overlays zur Karte hinzufügen
    map.addLayer(lyrSchummerung);
    map.addLayer(lyrHoeheProj);
	map.addLayer(lyrBombina_const);
	
	

    // ===== Auswahl-Panel mit zwei Checkboxen dynamisch erstellen =====
    const panel = document.createElement('div');
    panel.style.cssText = 'position:absolute;top:12px;left:12px;z-index:1000;background:rgba(255,255,255,.95);border:1px solid #e5e7eb;border-radius:10px;padding:8px 10px;box-shadow:0 6px 16px rgba(0,0,0,.08);font:14px system-ui,Arial;';
    panel.innerHTML = `
      <div style="font-weight:600;margin-bottom:6px;">Verbreitungskarten</div>
      <label style="display:flex;align-items:center;gap:8px;cursor:pointer;margin:4px 0;">
        <input type="checkbox" id="chk_schummerung"> Oberflächenschummerung (Steiermark)
      </label>
      <label style="display:flex;align-items:center;gap:8px;cursor:pointer;margin:4px 0;">
        <input type="checkbox" id="chk_hoeheproj"> Oberflaechenhoehe_Projekte
      </label>
	    <input type="checkbox" id="chk_bombina"> Gelbbauchunke
      </label>
    `;
    document.getElementById('map').appendChild(panel);

    // Checkbox-Logik
    const chkSchummerung = panel.querySelector('#chk_schummerung');
    const chkHoeheProj   = panel.querySelector('#chk_hoeheproj');
	const chkBombina   = panel.querySelector('#chk_bombina');

    chkSchummerung.addEventListener('change', () => {
      lyrSchummerung.setVisible(chkSchummerung.checked);
    });
    chkHoeheProj.addEventListener('change', () => {
      lyrHoeheProj.setVisible(chkHoeheProj.checked);
    });
	chkBombina.addEventListener('change', () => {
      lyrBombina_const.setVisible(chkBombina.checked);
    });
	
	
	
	
	
	
	
    // Maßstabsleiste hinzufügen
    map.addControl(new ol.control.ScaleLine());

    // Optional: einen Overlay-Layer standardmäßig aktivieren:
    // lyrSchummerung.setVisible(true); chkSchummerung.checked = true;
    // lyrHoeheProj.setVisible(true);   chkHoeheProj.checked   = true;
  </script>
</body>

</html>

